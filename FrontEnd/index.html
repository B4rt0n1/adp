<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Go Handbook</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<header class="site-header">
  <div class="container">
    <a href="/" class="logo">GoEdu</a>
    <nav class="main-nav" id="mainNav">
      <a href="/">Home</a>
      <a href="/handbooks">Handbooks</a>
      <a id="authInvise"></a>
      <a href="/about">About</a>
      <a href="/registration" id="authSlot">Register</a>
    </nav>
  </div>
</header>


    <div class="content-wrapper">
        <aside class="sidebar">
            <ul class="toc">
                <li><a href="#intro">Introduction</a></li>
                <li><a href="#basics">Go Basics</a></li>
                <li><a href="#syntax">Syntax & Structure</a></li>
                <li><a href="#concurrency">Concurrency</a></li>
                <li><a href="#packages">Packages & Modules</a></li>
                <li><a href="#summary">Summary</a></li>
            </ul>
        </aside>

        <main class="main-content">
            

            <section id="intro">
                <h2>Introduction</h2>
                <p>
                    Go (or Golang) is a modern, compiled programming language created at Google.
                    It focuses on simplicity, performance, and built-in concurrency.
                </p>
            </section>

            <section id="basics">
                <h2>Go Basics</h2>
                <p>
                    Go has a small set of keywords, strong typing, and automatic memory management.
                    Programs start execution from the <code>main</code> package.
                </p>
            </section>

            <section id="syntax">
                <h2>Syntax & Structure</h2>
                <p>
                    Go syntax is clean and readable. Braces are mandatory, and formatting is enforced
                    by the official <code>gofmt</code> tool.
                </p>
            </section>

            <section id="concurrency">
                <h2>Concurrency</h2>
                <p>
                    Concurrency is a core feature of Go. Goroutines and channels make it easy
                    to write concurrent and parallel programs.
                </p>
            </section>

            <section id="packages">
                <h2>Packages & Modules</h2>
                <p>
                    Go uses packages to organize code and modules to manage dependencies.
                    The <code>go mod</code> system handles versioning and builds.
                </p>
            </section>

            <section id="summary">
                <h2>Summary</h2>
                <p>
                    Go is ideal for backend services, cloud systems, and scalable applications.
                    Its simplicity makes it easy to learn and hard to misuse.
                </p>
            </section>
        </main>
    </div>

    <footer class="site-footer">
        <p>Saken Akhmediyar, Aron Davlyudov, Aslan Aldashev</p>
    </footer>

<script>
async function updateNavbar() {
  const authSlot = document.getElementById("authSlot");
  if (!authSlot) return;

  let res;
  try {
    res = await fetch("/api/me", { credentials: "same-origin" });
  } catch (e) {
    console.error("Auth check failed", e);
    return;
  }

  if (res.ok) {
    const user = await res.json();

    authSlot.outerHTML = `
      <a href="#" id="logoutLink">Logout</a>
    `;

    authInvise.outerHTML = `<a href="/go">Go</a>`;

    document.getElementById("logoutLink")
      .addEventListener("click", async (e) => {
        e.preventDefault();
        await fetch("/api/logout", {
          method: "POST",
          credentials: "same-origin"
        });
        window.location.href = "/login";
      });

  } else {
    authSlot.outerHTML = `
      <a href="/registration">Register</a>
    `;
    authInvise.outerHTML = ``;
  }
}

updateNavbar();
</script>

</body>
</html>
